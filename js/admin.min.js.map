{"version":3,"file":"admin.min.js","mappings":"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","sources":["webpack://signal/../../../js/imports.js","webpack://signal/../../forms/js/forms.js","webpack://signal/../../../js/field_value.js","webpack://signal/./admin.js"],"sourcesContent":["export let scripts;\r\n\r\nexport let afterScriptsLoaded\t= function (attachTo){\r\n    if(typeof(tinymce) != 'undefined'){\r\n        tinymce.remove();\r\n\r\n        // Activate tinyMce's again\r\n        document.querySelectorAll('.entry-content .wp-editor-area').forEach(el =>{\r\n            window.tinyMCE.execCommand('mceAddEditor', false, el.id);\r\n        });\r\n    }    \r\n\r\n    // invoke dom content loaded events\r\n    window.document.dispatchEvent(new Event(\"DOMContentLoaded\", {\r\n        bubbles: true,\r\n        cancelable: true\r\n    }));\r\n\r\n    // Somehow the visual/text switch does not work, manually fix it\r\n    document.querySelectorAll('.wp-switch-editor').forEach(el=>el.addEventListener('click', ev=>{\r\n        let area    = el.closest('.wp-editor-wrap').querySelector('.wp-editor-area');\r\n        let panel   =  el.closest('.wp-editor-wrap').querySelector('.mce-panel');\r\n        area.style.visibility='unset';\r\n        if(ev.target.matches('.switch-tmce')){\r\n           panel.style.display='block';\r\n            area.style.display='none';\r\n        }else{\r\n            panel.style.display='none';\r\n            area.style.display='block';\r\n        }\r\n    }));\r\n\r\n    //add niceselects\r\n\tdocument.querySelectorAll('select:not(.nonice,.swal2-select)').forEach(function(select){\r\n        if(select._niceselect == undefined){\r\n\t\t    select._niceselect = NiceSelect.bind(select,{searchable: true});\r\n        }\r\n\t});\r\n\r\n    const ev = new Event('scriptsloaded');\r\n\tattachTo.dispatchEvent(ev);\r\n}\r\n\r\nexport let addStyles    = function (response, attachTo){\r\n    let temp = document.createElement('div');\r\n\r\n    if(response.js){\r\n        temp.innerHTML =  response.js;\r\n        scripts\t= [...temp.children];\r\n        addScripts(attachTo);\r\n    }\r\n\r\n    if(response.css){\r\n        temp.innerHTML = response.css;\r\n        [...temp.children].forEach(el => {\r\n            document.head.appendChild(el);\r\n        });\r\n    }\r\n}\r\n\r\nexport let addScripts\t= function (attachTo) {\r\n    if(attachTo == undefined){\r\n        return;\r\n    }\r\n\r\n    if(scripts.length == 0){\r\n        afterScriptsLoaded(attachTo);\r\n    }\r\n    let el\t= scripts.shift();\r\n\r\n    if(el == undefined){\r\n        afterScriptsLoaded(attachTo);\r\n        return;\r\n    }\r\n\r\n    // only add if needed\r\n    if(el.tagName == 'SCRIPT' && document.getElementById(el.id) == null){\r\n        var s = document.createElement('script');\r\n\r\n        if(el.type == ''){\r\n            s.type\t= 'text/javascript'; \r\n        }else{\r\n            s.type\t= el.type;\r\n        }\r\n\r\n        if(el.src != ''){\r\n            s.src \t= el.src;\r\n        }else{\r\n            s.innerHTML\t= el.innerHTML;\r\n        }\r\n        \r\n        s.id\t= el.id;\r\n        \r\n        document.head.appendChild(s);\r\n\r\n        if(scripts.length > 0){\r\n            if(el.src != ''){\r\n                s.addEventListener('load', addScripts.bind( null, attachTo ) );\r\n            }else{\r\n                addScripts(attachTo);\r\n            }\r\n        }else{\r\n            if(el.src != ''){\r\n                s.addEventListener('load', afterScriptsLoaded.bind( null, attachTo));\r\n            }else{\r\n                afterScriptsLoaded(attachTo);\r\n            }\t\t\t\r\n        }\r\n    }else if(scripts.length > 0){\r\n        // get next script\r\n        addScripts(attachTo);\r\n    }else{\r\n        afterScriptsLoaded(attachTo);\r\n    }\r\n}\r\n\r\nexport function displayMessage(message, icon, autoclose=false, no_ok=false, timer=1500){\r\n\tif(message == undefined){\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tif(typeof(Swal) != 'undefined'){\r\n\t\tvar options = {\r\n\t\t\ticon: icon,\r\n\t\t\ttitle: message.trim(),\r\n\t\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\t\tcancelButtonColor: 'Crimson'\r\n\t\t};\r\n\r\n\t\tif(no_ok){\r\n\t\t\toptions['showConfirmButton'] = false;\r\n\t\t}\r\n\t\t\r\n\t\tif(typeof(callback) == 'function'){\r\n\t\t\toptions['didClose'] = () => callback();\r\n\t\t}\r\n\t\t\r\n\t\tif(autoclose){\r\n\t\t\toptions['timer'] = timer;\r\n\t\t}\r\n\r\n        if(document.fullscreenElement != null){\r\n\t\t\toptions['target']\t= document.fullscreenElement;\r\n\t\t}\r\n\t\t\r\n\t\treturn Swal.fire(options);\r\n\t}else{\r\n\t\treturn alert(message.trim());\r\n\t}\r\n}\r\n\r\nexport function showLoader(element, replace=true, message=''){\r\n\tif(element == null){\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tlet wrapper\t= document.createElement(\"DIV\");\r\n\twrapper.setAttribute('class','loaderwrapper');\r\n\tif(message != ''){\r\n\t\twrapper.innerHTML\t= message;\r\n\t}\r\n\r\n\tlet loader\t= document.createElement(\"IMG\");\r\n\tloader.setAttribute('class','loadergif');\r\n\tloader.setAttribute(\"src\", sim.loadingGif);\r\n\tloader.style[\"height\"]= \"30px\";\r\n\r\n\twrapper.insertAdjacentElement('beforeEnd', loader);\r\n\tif(replace){\r\n\t\telement.parentNode.replaceChild(wrapper, element);\r\n\t}else{\r\n        let el  = element.nextElementSibling;\r\n        if(el == null){\r\n            element.parentNode.insertAdjacentElement('beforeEnd', wrapper);\r\n        }else{\r\n            element.parentNode.insertBefore(wrapper, el);\r\n        }\r\n\t}\r\n\r\n\treturn wrapper;\r\n}\r\n\r\n//Check if on mobile\r\nexport function isMobileDevice() {\r\n    let check = false;\r\n    (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);\r\n    return check;\r\n}\r\n","import { addStyles } from './../../../js/imports.js';\r\nimport { getFieldValue } from  '../../../js/field_value.js';\r\nexport{ getFieldValue };\r\n\r\nconsole.log('Forms.js is loaded');\r\n\r\nasync function saveFormInput(target){\r\n\tlet form\t\t= target.closest('form');\r\n\r\n\t// make all inputs required if needed\r\n\tform.querySelectorAll('.required:not(hidden) input, .required:not(hidden) textarea, .required:not(hidden) select').forEach(el=>{\r\n\t\t// do not make nice select inputs nor file uploads required\r\n\t\tif(el.closest('div.nice-select') == null && (el.type != 'file' || el.closest('.file_upload_wrap').querySelector('.documentpreview input') == null)){\r\n\t\t\tel.required\t= true;\r\n\t\t}\r\n\t});\r\n\r\n\tlet response\t= await FormSubmit.submitForm(target, 'forms/save_form_input');\r\n\r\n\tif(response){\r\n\t\ttarget.closest('.submit_wrapper').querySelector('.loadergif').classList.add('hidden');\r\n\r\n\t\tMain.displayMessage(response);\r\n\r\n\t\tif(form.dataset.reset == 'true'){\r\n\t\t\tFormSubmit.formReset(form);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function removeDefaultSelect(el){\r\n\tArray.from(el.options).forEach(function(option){\r\n\t\toption.defaultSelected = false;\r\n\t});\r\n}\r\n\r\nlet tinymceSettings = [];\r\nfunction prepareForCloning(originalNode){\r\n\t//First remove any nice selects\r\n\toriginalNode.querySelectorAll('select').forEach(select => {\r\n\t\t//remove defaults if it has changed\r\n\t\tif(select.selectedIndex != -1){\r\n\t\t\tif(!select.options[select.selectedIndex].defaultSelected){\r\n\t\t\t\t//remove all default selected\r\n\t\t\t\tremoveDefaultSelect(select);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//Then add a new default selected if needed\r\n\t\tif(select.selectedOptions.length>0){\r\n\t\t\tselect.selectedOptions[0].defaultSelected = true;\r\n\t\t}\r\n\t\t\r\n\t\t//remove the original\r\n\t\tselect._niceselect.destroy()\r\n\t});\r\n\r\n\t//also remove any tinymce's\r\n\tif(typeof(tinymce) != 'undefined'){\r\n\t\toriginalNode.querySelectorAll('.wp-editor-area').forEach(el =>{\r\n\t\t\tlet tn = tinymce.get(el.id);\r\n\t\t\tif(tn != null){\r\n\t\t\t\ttinymceSettings[el.id] = tn.settings\r\n\t\t\t\ttn.save();\r\n\t\t\t\ttn.remove();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function cloneNode(originalNode, clear=true){\r\n\tprepareForCloning(originalNode);\r\n\t\r\n\t//make a clone\r\n\tlet newNode = originalNode.cloneNode(true);\r\n\t\r\n\t//Then add niceselects again after cloning took place\r\n\toriginalNode.querySelectorAll('select').forEach(select => {\r\n\t\tselect._niceselect = NiceSelect.bind(select,{searchable: true});\r\n\t\tif(select.value == ''){\r\n\t\t\tselect._niceselect.clear();\r\n\t\t}\r\n\t});\r\n\t\r\n\t//add tinymce's again\r\n\toriginalNode.querySelectorAll('.wp-editor-area').forEach(el =>{\r\n\t\tif(tinymceSettings[el.id] != undefined){\r\n\t\t\ttinymce.init(tinymceSettings[el.id]);\r\n\t\t}\r\n\t});\r\n\t\r\n\t//clear values in the clone\r\n\tif(clear){\r\n\t\tnewNode.querySelectorAll('input,select,textarea').forEach(input => {\r\n\t\t\tif(input.type == 'checkbox' || input.type == 'radio'){\r\n\t\t\t\tinput.checked = false;\r\n\t\t\t}else if(input.type != 'hidden'){\r\n\t\t\t\tinput.value = \"\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//if this is a select\r\n\t\t\tif(input.type == \"select-one\"){\r\n\t\t\t\t//remove any defaults\r\n\t\t\t\tremoveDefaultSelect(input);\r\n\t\t\t\t\r\n\t\t\t\tinput._niceselect = NiceSelect.bind(input,{searchable: true});\r\n\t\t\t\tinput._niceselect.clear();\r\n\t\t\t}\r\n\t\t});\r\n\t}else{\r\n\t\tnewNode.querySelectorAll('select').forEach(select => {\r\n\t\t\tselect._niceselect = NiceSelect.bind(select,{searchable: true});\r\n\t\t});\r\n\t}\r\n\t\r\n\treturn newNode;\r\n}\r\n\r\nexport function copyFormInput(originalNode){\r\n\tlet newNode = cloneNode(originalNode);\r\n\t\r\n\t//update the data index\r\n\tnewNode.querySelectorAll('.upload-files').forEach(function(uploadButton){\r\n\t\tuploadButton.dataset.index = nodeNr;\r\n\t})\r\n\t\r\n\t//Clear contents of any document preview divs.\r\n\tnewNode.querySelectorAll('.documentpreview').forEach(function(previewDiv){\r\n\t\tpreviewDiv.innerHTML = '';\r\n\t});\r\n\r\n\t//Select\r\n\tlet i = 0;\r\n\tnewNode.querySelectorAll('select').forEach(select => {\r\n\t\t//Find the value of the select we have cloned\r\n\t\tlet previousVal = originalNode.getElementsByTagName('select')[i].selectedIndex;\r\n\t\t\r\n\t\t//Hide the value in the clone\r\n\t\tif(select.options[previousVal] != undefined){\r\n\t\t\tselect.options[previousVal].style.display = 'none';\r\n\t\t}else{\r\n\t\t\tconsole.log(select);\r\n\t\t\tconsole.log(select.options);\r\n\t\t\tconsole.log(previousVal);\r\n\t\t}\r\n\t\t\r\n\t\t//Add nice select\r\n\t\tif(select._niceselect == undefined){\r\n\t\t\tconsole.error(select);\r\n\t\t\tselect._niceselect = NiceSelect.bind(select, {searchable: true});\r\n\t\t}else{\r\n\t\t\tselect._niceselect.update();\r\n\t\t\tselect.nextSibling.querySelector('.current').textContent = 'Select an option';\r\n\t\t}\r\n\t\t\r\n\t\ti++;\r\n\t});\r\n\t\r\n\t//Add remove buttons if they are not there\r\n\tif(originalNode.querySelector('.remove') == null && newNode.querySelector('.remove') == null){\r\n \t\tlet html = `<button type=\"button\" class=\"remove button\" style=\"flex: 1;\">-</button>`;\r\n\r\n\t\t//Add minus button to the first div\r\n\t\toriginalNode.querySelector('.buttonwrapper').insertAdjacentHTML('beforeend', html);\r\n\r\n\t\t//Add minus button to the second div\r\n\t\tnewNode.querySelector('.buttonwrapper').insertAdjacentHTML('beforeend', html)\r\n\t}\t\r\n\t\r\n\t//Insert the clone\r\n\toriginalNode.parentNode.insertBefore(newNode, originalNode.nextSibling);\r\n\t\r\n\treturn newNode;\r\n}\r\n\r\nexport function fixNumbering(cloneDivsWrapper){\r\n\tcloneDivsWrapper.querySelectorAll(':scope > .clone_div').forEach((clone, index)=>{\r\n\t\t//Update the new number\t\r\n\t\t//DIV\r\n\t\tif(clone.id != ''){\r\n\t\t\tclone.id = clone.id.replace(/[0-9]+(?!.*[0-9])/, index);\r\n\t\t}\r\n\t\t\r\n\t\tif(clone.dataset.divid  != null){\r\n\t\t\tclone.dataset.divid = index;\r\n\t\t}\r\n\t\t\r\n\t\t//Update the title\r\n\t\tclone.querySelectorAll('h3, h4, legend :first-child').forEach(el => {\r\n\t\t\tel.textContent = el.textContent.replace(/[0-9]+(?!.*[0-9])/, index+1);\r\n\t\t});\r\n\t\t\r\n\t\t//Update the legend\r\n\t\t/* clone.querySelectorAll('legend').forEach(legend => {\r\n\t\t\tlegend.textContent = legend.textContent.replace(/[0-9]+(?!.*[0-9])/, ' '+(index+1));\r\n\t\t}); */\r\n\t\t\r\n\t\t//Update the elements\r\n\t\tclone.querySelectorAll('input,select,textarea').forEach(input => {\r\n\t\t\t//Do not copy nice selects\r\n\t\t\tif(!input.classList.contains('nice-select-search')){\r\n\t\t\t\t//Update the id\r\n\t\t\t\tif(input.id != '' && input.id != undefined){\r\n\t\t\t\t\tinput.id = input.id.replace(/[0-9]+(?!.*[0-9])/, index);\r\n\t\t\t\t}\r\n\t\t\t\t//Update the name\r\n\t\t\t\tif(input.name != '' && input.name != undefined){\r\n\t\t\t\t\tinput.name = input.name.replace(/[0-9]+(?!.*[0-9])/, index);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//Reset the select to the default\r\n\t\t\t\tif(input.type == 'button'){\r\n\t\t\t\t\tinput.value = input.value.replace(/[0-9]+(?!.*[0-9])/, index);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t})\r\n}\r\n\r\nexport function removeNode(target){\r\n\tlet node\t\t\t= target.closest(\".clone_div\");\r\n\tlet parentNode\t\t= node.closest('.clone_divs_wrapper');\r\n\tlet allCloneDivs\t= parentNode.querySelectorAll('.clone_div');\r\n\t\r\n\t//Check if we are removing the last element\r\n\tif(allCloneDivs[allCloneDivs.length-1] == node){\r\n\t\tlet addElement = node.querySelector(\".add\");\r\n\t\t\r\n\t\t//Move the add button one up\r\n\t\tlet prev = node.previousElementSibling;\r\n\t\tif(prev.querySelector('.buttonwrapper .add') == null){\r\n\t\t\tprev.querySelector('.buttonwrapper').appendChild(addElement);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//Remove the node\r\n\tnode.remove();\r\n\r\n\t//If there is only one div remaining, remove the remove button\r\n\tif(parentNode.querySelectorAll('.clone_div').length == 1){\r\n\t\tlet removeElement = parentNode.querySelector('.remove');\r\n\t\tremoveElement.remove();\r\n\t}\r\n\r\n\tfixNumbering(parentNode)\r\n}\r\n\r\n/* \r\n\tFUNCTIONS USED BY DYNAMIC FORMS JS\r\n */\r\nexport function tidyMultiInputs(){\r\n\t//remove unnecessary buttons on inputs with multiple values\r\n\tdocument.querySelectorAll('.clone_divs_wrapper').forEach( function(div){\r\n\t\tlet cloneDivArr\t= div.querySelectorAll(':scope > .clone_div');\r\n\t\t\r\n\t\tif(cloneDivArr.length == 1){\r\n\t\t\tcloneDivArr[0].querySelectorAll('.remove').forEach(el=>el.remove());\r\n\t\t}\r\n\t\t\r\n\t\tcloneDivArr.forEach(function(cloneDiv, index, array){\r\n\t\t\t//update dataset\r\n\t\t\tcloneDiv.dataset.divid = index;\r\n\t\t\t\r\n\t\t\t//remove add button for all but the last\r\n\t\t\tif(index != array.length - 1){\r\n\t\t\t\t// Select all add buttons but not the any nested buttons\r\n\t\t\t\tcloneDiv.querySelectorAll('.add:not(:scope .clone_divs_wrapper .add)').forEach(el=>el.remove());\r\n\t\t\t}\r\n\t\t})\r\n\t});\r\n}\r\n\r\nexport function updateMultiStepControls(form){\r\n\t// get active formsteps amount\r\n\tlet formsteps\t\t\t= form.querySelectorAll('.formstep');\r\n\tlet visibleFormsteps\t= form.querySelectorAll('.formstep:not(.hidden)');\r\n\tlet stepIndicators\t\t= form.querySelectorAll('.multistepcontrols_wrapper .step');\r\n\r\n\t// update step circles amount\r\n\tfor(let x = visibleFormsteps.length; x < formsteps.length; x++){\r\n\t\tstepIndicators[x].classList.add('hidden');\r\n\t}\r\n\r\n\t// check if this is the last visible\r\n\tlet activeFormstep\t\t= form.querySelector('.formstep:not(.stephidden)');\r\n\tif(visibleFormsteps[visibleFormsteps.length-1] == activeFormstep){\r\n\t\t// make the submit button visible\r\n\t\tform.querySelector('.nextBtn').classList.add('hidden');\r\n\t\tform.querySelector('.form_submit ').classList.remove('hidden');\r\n\t}else{\r\n\t\tform.querySelector('.nextBtn').classList.remove('hidden');\r\n\t\tform.querySelector('.form_submit ').classList.add('hidden');\r\n\t}\r\n}\r\n\t\r\n//show a next form step\r\nexport function showTab(n, form) {\r\n\tif(typeof(form) != 'undefined'){\r\n\t\tif(n == 0){\r\n\t\t\tlet loader = form.querySelector('.formsteploader');\r\n\t\t\t//hide loader\r\n\t\t\tif(loader != null){\r\n\t\t\t\tloader.classList.add('hidden');\r\n\t\t\t\r\n\t\t\t\t//show form controls\r\n\t\t\t\tform.querySelector('.multistepcontrols').classList.remove('hidden');\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//hide all formsteps\r\n\t\tform.querySelectorAll('.formstep:not(.stephidden)').forEach(step=>step.classList.add('stephidden'));\r\n\t\t\r\n\t\t// Show the specified formstep of the form ...\r\n\t\tlet x = form.getElementsByClassName(\"formstep\");\r\n\t\t\r\n\t\tif(x.length == 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\t//scroll back to top\r\n\t\tlet y = x[n].offsetTop - document.querySelector(\"#masthead\").offsetHeight\r\n\t\twindow.scrollTo({ top: y, behavior: 'auto'});\r\n\t\t\r\n\t\t//show\r\n\t\tx[n].classList.remove('stephidden');\r\n\r\n\t\t// This function removes the \"active\" class of all steps...\r\n\t\tform.querySelectorAll(\".step.active\").forEach(el=>{el.classList.remove('active');});\r\n\r\n\t\t//... and adds the \"active\" class to the current step:\r\n\t\tx = form.getElementsByClassName(\"step\");\r\n\t\ttry{\r\n\t\t\tx[n].classList.add(\"active\");\r\n\t\t}catch(err) {\r\n\t\t\tconsole.log(x);\r\n\t\t\tconsole.log(n);\r\n\t\t  \tconsole.error(err.message);\r\n\t\t}\r\n\t\t\r\n\r\n\t\t// ... and fix the Previous/Next buttons:\r\n\t\tif (n == 0) {\r\n\t\t\tform.querySelector('[name=\"prevBtn\"]').classList.add('hidden');\r\n\t\t} else {\r\n\t\t\tform.querySelector('[name=\"prevBtn\"]').classList.remove('hidden');\r\n\t\t}\r\n\r\n\t\tif (n == (x.length - 1)) {\r\n\t\t\tform.querySelector('[name=\"nextBtn\"]').classList.add('hidden');\r\n\t\t\tform.querySelector('.form_submit').classList.remove('hidden');\r\n\t\t} else {\r\n\t\t\tform.querySelector('[name=\"nextBtn\"]').classList.remove('hidden');\r\n\t\t\tform.querySelector('.form_submit').classList.add('hidden');\r\n\t\t}\r\n\t}else{\r\n\t\tconsole.log('no form defined');\r\n\t}\r\n\t\t\r\n}\r\n\r\n//next form step clicked\r\nexport function nextPrev(n) {\r\n\t// This function will figure out which tab to display\r\n\tlet x \t\t\t\t= form.querySelectorAll(\".formstep\");\r\n\tlet stepIndicators\t= form.querySelectorAll(\".step\");\r\n\tlet currentTab\t\t= 0;\r\n\tlet valid\t\t\t= true;\r\n\r\n\t// Find the current active tab\r\n\tx.forEach((el, index)=>{if(!el.matches('.stephidden')){currentTab = index}});\r\n\t\r\n\t//Check validity of this step if going forward\r\n\tif(n>0){\r\n\t\t// Report validity of each required field\r\n\t\tlet elements\t= x[currentTab].querySelectorAll('.required:not(.hidden) input, .required:not(.hidden) textarea, .required:not(.hidden) select');\r\n\t\tfor(const element of elements) {\r\n\t\t\tif(\r\n\t\t\t\telement.closest('.hidden')\t== null\t&&\r\n\t\t\t\telement.closest('div.nice-select') == null && \r\n\t\t\t\t(\r\n\t\t\t\t\telement.type != 'file' || \r\n\t\t\t\t\telement.closest('.file_upload_wrap').querySelector('.documentpreview input') == null\r\n\t\t\t\t)\r\n\t\t\t){\r\n\t\t\t\telement.required\t= true;\r\n\t\t\t\tvalid\t\t\t\t= element.reportValidity();\r\n\t\t\t\tif(!valid){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(!valid) return;\r\n\t\t\r\n\t\t//mark the last step as finished\r\n\t\tstepIndicators[currentTab].classList.add(\"finish\");\r\n\t}else{\r\n\t\t//mark the last step as unfinished\r\n\t\tstepIndicators[currentTab].classList.remove(\"finish\");\r\n\t}\r\n\t\r\n\t//loop over all the formsteps to hide stepindicators of them if needed\r\n\tArray.from(x).forEach((formstep,index) =>{\r\n\t\tif(formstep.classList.contains('hidden')){\r\n\t\t\t//hide the corresponding circle\r\n\t\t\tstepIndicators[index].classList.add('hidden');\r\n\t\t}\r\n\t});\r\n\r\n\t// Increase or decrease the current tab by 1:\r\n\tcurrentTab = currentTab + n;\r\n\t\r\n\t//check if the next tab is hidden\r\n\twhile(x[currentTab].classList.contains('hidden')){\r\n\t\t//go to the next tab\r\n\t\tcurrentTab = currentTab + n;\r\n\r\n\t\tif (currentTab >= x.length) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t\r\n\t// if you have reached the end of the form... :\r\n\tif (currentTab >= x.length) {\r\n\t\treturn false;\r\n\t}\r\n\t// Otherwise, display the correct tab:\r\n\tshowTab(currentTab,form);\r\n\r\n\treturn true;\r\n}\r\n\r\nexport function changeFieldValue(selector, value, functionRef, form, addition='', forceValue=false){\r\n\tif(value == undefined){\r\n\t\treturn;\r\n\t}\r\n\r\n\tlet name\t\t= '';\r\n\tlet target\t\t= '';\r\n\r\n\tif(selector instanceof Element){\r\n\t\ttarget\t\t= selector;\r\n\t\tname\t\t= target.name;\r\n\t\tif(target.id == ''){\r\n\t\t\tselector\t= `[name^=\"${target.name}\" i]`;\r\n\t\t}else{\r\n\t\t\tselector\t= `[id^=${target.id}]`;\r\n\t\t}\r\n\t\t\r\n\t}else{\r\n\t\ttarget \t\t= form.querySelector(selector);\r\n\r\n\t\ttry{\r\n\t\t\tname\t\t= target.name;\r\n\t\t}catch{\r\n\t\t\tconsole.log(target);\r\n\t\t}\r\n\t}\r\n\r\n\tlet oldValue\t= getFieldValue(target, form, false, value);\r\n\t// nothing to change\r\n\tif(oldValue == value){\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Check if we are dealing with a multi input field\r\n\tif(target == null){\r\n\t\tlet targets \t= form.querySelectorAll(`.clone_div [name^=\"${name}\" i]`);\r\n\t\tif(targets.length === 0){\r\n\t\t\treturn;\r\n\t\t}else if(targets.length == 1){\r\n\t\t\ttarget\t= targets[0];\r\n\t\t\ttargets\t= '';\r\n\t\t}else{\r\n\t\t\ttarget\t= targets[0];\r\n\r\n\t\t\ttargets.forEach((el, index) =>{\r\n\t\t\t\tif(index == 0){\r\n\t\t\t\t\tchangeFieldValue(el, '', '', form);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tremoveNode(el);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// calculate the new value\r\n\tif(addition != ''){\r\n\t\t// check if a date\r\n\t\tif (/\\d{4}-\\d{2}-\\d{2}/.test(value)){\r\n\t\t\tlet date\t= new Date(value);\r\n\t\t\tdate.setDate(date.getDate() + parseInt(addition));\r\n\t\t\tvalue\t= date.toISOString().split('T')[0];\r\n\t\t}else{\r\n\t\t\tvalue\t= value + parseInt(addition);\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(target.type == 'radio' || target.type == 'checkbox'){\r\n\t\t// uncheck all\r\n\t\tif(value == ''){\r\n\t\t\tif(selector != ''){\r\n\t\t\t\tform.querySelectorAll(selector).forEach(el=>el.checked=false);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t// Check if the current target is the one we need to check\r\n\t\t\tif(target.value.toLowerCase() == value.toLowerCase()){\r\n\t\t\t\ttarget.checked = true;\r\n\t\t\t}else{\r\n\t\t\t\t// find the element with the given value and check it\r\n\t\t\t\tlet targets = form.querySelectorAll(`[name=\"${name}\" i]`);\r\n\t\t\t\tfor (const element of targets) {\r\n\t\t\t\t\tif(element.value.toLowerCase() == value.toLowerCase()){\r\n\t\t\t\t\t\telement.checked = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t//the target has a list attached to it\r\n\t}else if(target.type == 'date'){\r\n\t\ttarget.value = value;\r\n\t\t\r\n\t\t// convert a date to the right format\r\n\t\tif (!/\\d{4}-\\d{2}-\\d{2}/.test(value)){\r\n\t\t\tlet splitted = '';\r\n\t\t\tif(value.split('-').length == 3){\r\n\t\t\t\tsplitted\t= value.split('-');\r\n\t\t\t}else if(value.split('/').length == 3){\r\n\t\t\t\tsplitted\t= value.split('/');\r\n\t\t\t}\r\n\r\n\t\t\tif(splitted != ''){\r\n\t\t\t\tlet year;\r\n\t\t\t\tlet month;\r\n\t\t\t\tlet day;\r\n\t\t\t\tsplitted.forEach(nr=>{\r\n\t\t\t\t\tif(nr.length == 4){\r\n\t\t\t\t\t\tyear\t= nr;\r\n\t\t\t\t\t}else if(nr.length == 2){\r\n\t\t\t\t\t\tif(nr > 12){\r\n\t\t\t\t\t\t\tday\t= nr;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t// does not have a value yet\r\n\t\t\t\t\t\t\tif(month == undefined){\r\n\t\t\t\t\t\t\t\tmonth\t= nr;\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tday\t= nr;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(day != undefined && month != undefined && year != undefined){\r\n\t\t\t\t\ttarget.value = `${year}-${month}-${day}`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}else if(target.list != null){\r\n\t\tlet dataListOption = target.list.querySelector(`[data-value=\"${value}\" i]`);\r\n\r\n\t\t//we found a match\r\n\t\tif(dataListOption != null){\r\n\t\t\t// We found a cloned field, add as many inputs as needed\r\n\t\t\tif(target.closest('.clone_div') != null){\r\n\t\t\t\t// mark the existing ones for deletion, we can delete right now as we need to copy the existing ones first\r\n\t\t\t\ttarget.closest('.clone_divs_wrapper').querySelectorAll('.clone_div').forEach(el=>el.classList.add('shouldremove'));\r\n\r\n\t\t\t\tlet clone;\r\n\t\t\t\tdataListOption.value.split(';').forEach(val=>{\r\n\t\t\t\t\tclone = copyFormInput(target.closest('.clone_div'));\r\n\r\n\t\t\t\t\tclone.classList.remove('shouldremove');\r\n\r\n\t\t\t\t\tchangeFieldValue(clone.querySelector(target.tagName), val, '', form, '', true);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tfixNumbering(target.closest('.clone_divs_wrapper'));\r\n\r\n\t\t\t\t// delete the old ones\r\n\t\t\t\ttarget.closest('.clone_divs_wrapper').querySelectorAll('.shouldremove').forEach(el=>el.remove());\r\n\t\t\t}else{\r\n\t\t\t\ttarget.value = dataListOption.value;\r\n\t\t\t}\r\n\t\t// We did not find a match, we are filling in the given value\r\n\t\t}else if(forceValue){\r\n\t\t\ttarget.value = value;\r\n\t\t// We did not find a match, empty value\r\n\t\t}else{\r\n\t\t\ttarget.value = '';\r\n\t\t}\r\n\t}else{\r\n\t\ttarget.value = value;\r\n\t}\r\n\t\r\n\t//create a new event\r\n\tlet evt = new Event('input');\r\n\t//attach the target\r\n\ttarget.dispatchEvent(evt);\r\n\t\r\n\t//run the originating function with this event\r\n\tif(typeof functionRef == 'function'){\r\n\t\tfunctionRef(target);\r\n\t}\r\n}\r\n\r\nexport function changeVisibility(action, el, functionRef){\r\n\tlet wrapper\t= el.closest('.inputwrapper');\r\n\tif(wrapper == null){\r\n\t\twrapper\t= el\r\n\t}\r\n\t\r\n\tif(action == 'add'){\r\n\t\tif(wrapper.matches('.hidden')){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\twrapper.classList.add('hidden');\r\n\t}else{\r\n\t\tif(!wrapper.matches('.hidden')){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\twrapper.classList.remove('hidden');\r\n\t}\r\n\t//form.querySelector(\"[name='$conditionalFieldName']\").closest('.hidden') == null;\r\n\r\n\t//create a new event\r\n\tlet evt = new Event('input');\r\n\t//attach the target\r\n\twrapper.dispatchEvent(evt);\r\n\t\r\n\t//run the originating function with this event\r\n\tif(typeof functionRef == 'function'){\r\n\t\tfunctionRef(el);\r\n\t}\r\n}\r\n\r\nexport function changeFieldProperty(selector, att, value, functionRef, form, addition=''){\r\n\t//first change the value\r\n\tlet target = form.querySelector(selector);\r\n\r\n\t// calculate the new value\r\n\tif(addition != ''){\r\n\t\t// check if a date\r\n\t\tif (/\\d{4}-\\d{2}-\\d{2}/.test(value)){\r\n\t\t\tlet date\t= new Date(value);\r\n\t\t\tdate.setDate(date.getDate() + parseInt(addition));\r\n\t\t\tvalue\t= date.toISOString().split('T')[0];\r\n\t\t}else{\r\n\t\t\tvalue\t= value + parseInt(addition);\r\n\t\t}\r\n\t}\r\n\r\n\ttarget[att] = value;\r\n\t\r\n\t//create a new event\r\n\tlet evt = new Event('input');\r\n\r\n\t//attach the target\r\n\ttarget.dispatchEvent(evt);\r\n\r\n\t//run the originating function with this event\r\n\tfunctionRef(target);\r\n}\r\n\r\nasync function formbuilderSwitch(target){\r\n\tlet wrapper\t= target.closest('.sim-form-wrapper');\r\n\tlet button\t= target.outerHTML;\r\n\r\n\tlet formData = new FormData();\r\n\tlet formId;\r\n\r\n\tconst url \t\t= new URL(window.location);\r\n\tif(target.matches('.formbuilder-switch')){\r\n\t\tformData.append('formbuilder', true);\r\n\t\turl.searchParams.set('formbuilder', true);\r\n\r\n\t\tformId\t= wrapper.querySelector('form.sim-form-wrapper').dataset.formid;\r\n\t}else{\r\n\t\turl.searchParams.delete('formbuilder');\r\n\t\tformId\t= wrapper.querySelector('[name=\"formid\"]').value;\r\n\t}\r\n\twindow.history.pushState({}, '', url);\r\n\r\n\tformData.append('formid', formId);\r\n\r\n\tlet loader\t= Main.showLoader(target, false, 'Requesting form...');\r\n\twrapper.innerHTML\t= loader.outerHTML;\r\n\r\n\tlet response = await FormSubmit.fetchRestApi('forms/form_builder', formData);\r\n\r\n\tif(response){\r\n\t\twrapper.innerHTML\t= response.html;\r\n\r\n\t\taddStyles(response, document);\r\n\r\n\t\t// Activate tinyMce's again\r\n\t/* \twrapper.querySelectorAll('.wp-editor-area').forEach(el =>{\r\n\t\t\twindow.tinyMCE.execCommand('mceAddEditor', false, el.id);\r\n\t\t});\r\n\r\n\t\twrapper.querySelectorAll('select').forEach(function(select){\r\n\t\t\tselect._niceselect = NiceSelect.bind(select, {searchable: true});\r\n\t\t}); */\r\n\t}else{\r\n\t\tloader.outerHTML\t= button;\r\n\t}\r\n}\r\n\r\nasync function requestNewFormResults(target){\r\n\tlet wrapper\t\t= target.closest('.form.table-wrapper');\r\n\tlet button\t\t= target.outerHTML;\r\n\r\n\tlet formData \t= new FormData();\r\n\tlet formId\t\t= wrapper.querySelector('.sim-table.form-data-table').dataset.formid;\r\n\tlet shortcodeId\t= wrapper.querySelector('.sim-table.form-data-table').dataset.shortcodeid;\r\n\r\n\tformData.append('formid', formId);\r\n\tformData.append('shortcode_id', shortcodeId);\r\n\r\n\tconst url \t\t= new URL(window.location);\r\n\tif(url.searchParams.get('onlyown')){\r\n\t\tformData.append('onlyown', true);\r\n\t}\r\n\r\n\tif(url.searchParams.get('all')){\r\n\t\tformData.append('all', true);\r\n\t}\r\n\r\n\tif(url.searchParams.get('archived')){\r\n\t\tformData.append('archived', true);\r\n\t}\r\n\r\n\tlet loader\t= Main.showLoader(target, false, 'Requesting form results...');\r\n\twrapper.innerHTML\t= loader.outerHTML;\r\n\r\n\tlet response = await FormSubmit.fetchRestApi('forms/show_form_results', formData);\r\n\r\n\tif(response){\r\n\t\twrapper.innerHTML\t= response;\r\n\t}else{\r\n\t\tloader.outerHTML\t= button;\r\n\t}\r\n}\r\n\r\nasync function archivedEntriesSwitch(target){\r\n\tconst url \t\t= new URL(window.location);\r\n\tif(target.matches('.archive-switch-show')){\r\n\t\turl.searchParams.set('archived', true);\r\n\t}else{\r\n\t\turl.searchParams.delete('archived');\r\n\t}\r\n\twindow.history.pushState({}, '', url);\r\n\r\n\trequestNewFormResults(target);\r\n}\r\n\r\nasync function onlyOwnSwitch(target){\r\n\tconst url \t\t= new URL(window.location);\r\n\tif(target.matches('.onlyown-switch-on')){\r\n\t\turl.searchParams.set('onlyown', true);\r\n\t\turl.searchParams.delete('all', true);\r\n\t}else{\r\n\t\turl.searchParams.set('all', true);\r\n\t\turl.searchParams.delete('onlyown');\r\n\t}\r\n\twindow.history.pushState({}, '', url);\r\n\r\n\trequestNewFormResults(target);\r\n}\r\n\r\n//we are online again\r\nwindow.addEventListener('online', function(){\r\n\tdocument.querySelectorAll('.form_submit').forEach(btn=>{\r\n\t\tbtn.disabled = false\r\n\t\tbtn.querySelectorAll('.offline').forEach(el=>el.remove());\r\n\t});\r\n});\r\n\r\n//prevent form submit when offline\r\nwindow.addEventListener('offline',function(){\r\n\tdocument.querySelectorAll('.form_submit').forEach(btn=>{\r\n\t\tbtn.disabled = true;\r\n\t\tif(btn.querySelector('.online') == null){\r\n\t\t\tbtn.innerHTML = '<div class=\"online\">'+btn.innerHTML+'</div>';\r\n\t\t}\r\n\t\tbtn.innerHTML += '<div class=\"offline\">You are offline</div>'\r\n\t});\r\n});\r\n\r\ndocument.addEventListener('click', function(event) {\r\n\tlet target = event.target;\r\n\t\r\n\t//add element\r\n\tif(target.matches('.add')){\r\n\t\tlet newNode = copyFormInput(target.closest(\".clone_div\"));\r\n\r\n\t\tfixNumbering(target.closest('.clone_divs_wrapper'));\r\n\r\n\t\t//add tinymce's can only be done when node is inserted and id is unique\r\n\t\tnewNode.querySelectorAll('.wp-editor-area').forEach(el =>{\r\n\t\t\twindow.tinyMCE.execCommand('mceAddEditor',false, el.id);\r\n\t\t});\r\n\r\n\t\ttarget.remove();\r\n\t}\r\n\t\r\n\t//remove element\r\n\tif(target.matches('.remove')){\r\n\t\t//Remove node clicked\r\n\t\tremoveNode(target);\r\n\t}\r\n\r\n\tif(target.matches('.sim-form-wrapper [name=\"submit_form\"]')){\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\tsaveFormInput(target);\r\n\t}\r\n\r\n\tif(target.matches('.formbuilder-switch') || target.matches('.formbuilder-switch-back')){\r\n\t\tformbuilderSwitch(target);\r\n\t}\r\n\r\n\tif(target.matches('.archive-switch-hide') || target.matches('.archive-switch-show')){\r\n\t\tarchivedEntriesSwitch(target);\r\n\t}\r\n\r\n\tif(target.matches('.onlyown-switch-all') || target.matches('.onlyown-switch-on')){\r\n\t\tonlyOwnSwitch(target);\r\n\t}\r\n});\r\n\r\ndocument.addEventListener('change', ev=>{\r\n\t// select all elements with a datalist attached\r\n\tif(ev.target.matches('input[list]') && ev.target.name.includes('[')){\r\n\t\tlet el\t\t= ev.target.list.querySelector(`[value=\"${ev.target.value}\" i]`);\r\n\r\n\t\tif(el != null){\r\n\t\t\t// find the dataset value of the given element value\r\n\t\t\tlet value\t= el.dataset.value;\r\n\r\n\t\t\tif(value != undefined){\r\n\t\t\t\t// change the value to create extra inputs if necessary\r\n\t\t\t\tchangeFieldValue(ev.target, value, '', ev.target.closest('form'));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n})","function getRadioValue(form, selector){\r\n\tlet el\t= form.querySelector(`${selector}:checked`);\r\n\r\n\t//There is no radio selected currently\r\n\tif(el == null){\r\n\t\t//return an empty value\r\n\t\treturn '';\r\n\t}\r\n\r\n\treturn el.value;\r\n}\r\n\r\nfunction getCheckboxValue(form, selector, compareValue, orgName){\r\n\tlet value\t\t= '';\r\n\tlet elements\t= '';\r\n\r\n\t//we are dealing with a specific checkbox\r\n\tif(orgName.type == 'checkbox' && compareValue != null ){\r\n\t\tif(orgName.checked){\r\n\t\t\treturn orgName.value;\r\n\t\t}\r\n\t\t\r\n\t\treturn '';\r\n\t}\r\n\r\n\t//we should find the checkbox with this value and check if it is checked\r\n\tif(compareValue != null){\r\n\t\telements\t= form.querySelector(`${selector}[value=\"${compareValue}\" i]:checked`);\r\n\t\tif(elements != null){\r\n\t\t\tvalue = compareValue;\r\n\t\t}\r\n\t//no compare value give just return all checked values\r\n\t}else{\r\n\t\telements\t= form.querySelectorAll(`${selector}:checked`);\r\n\t\tvalue\t\t= [];\r\n\t\telements.forEach(el=>{\r\n\t\t\tvalue.push(el.value);\r\n\t\t\t/* if(value != ''){\r\n\t\t\t\tvalue += ', ';\r\n\t\t\t}\r\n\t\t\tvalue += el.value; */\r\n\t\t});\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\nfunction getMultiValue(form, el){\r\n\tlet value = [];\r\n\r\n\tform.querySelectorAll(`[name=\"${el.name}\"]`).forEach(elem => value.push(elem.value));\r\n\r\n\treturn value;\r\n}\r\n\r\nexport function getDataListValue(el){\r\n\tlet value\t\t= '';\r\n\tlet origInput \t= el.list.querySelector(`[value='${el.value}' i]`);\r\n\t\t\t\r\n\tif(origInput == null){\r\n\t\tvalue =  el.value;\r\n\t}else{\r\n\t\tvalue = origInput.dataset.value;\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\nexport function getFieldValue(orgName, form, checkDatalist=true, compareValue=null, lowercase=false){\r\n\r\n\tlet el\t\t\t= ''; \r\n\tlet name\t\t= '';\r\n\tlet value \t\t= '';\r\n\tlet selector\t= '';\r\n\r\n\t//name is not a name but a node\r\n\tif(orgName instanceof Element){\r\n\t\tel\t\t\t= orgName;\t\t\r\n\t\t//check if valid input type\r\n\t\tif(el.tagName != 'INPUT' && el.tagName != 'TEXTAREA' && el.tagName != 'SELECT' && el.closest('.nice-select-dropdown') == null){\r\n\t\t\tel = el.querySelector('input, select, textarea');\r\n\t\t}\r\n\t\tif(el == null){\r\n\t\t\tel\t\t\t= orgName;\r\n\t\t}\r\n\t\tname\t\t= el.name;\r\n\t// We should look for an id\r\n\t}else if(orgName.match(\"E[0-9]\")){\r\n\t\tselector\t= `[id^=${orgName}]`;\r\n\t\tel\t\t\t= form.querySelector(selector);\r\n\t\tname\t\t= el.name;\r\n\t}else{\r\n\t\tname\t\t= orgName;\r\n\t\tselector\t= `[name='${name}' i]`;\r\n\t\tel\t\t\t= form.querySelector(selector);\r\n\t}\r\n\t\r\n\tif(el == null){\r\n\t\tconsole.trace();\r\n\t\tconsole.log(\"cannot find element with name \"+name);\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tif(el.type == 'radio'){\r\n\t\tvalue\t= getRadioValue(form, selector);\r\n\t}else if(el.type == 'checkbox'){\r\n\t\tvalue\t= getCheckboxValue(form, selector, compareValue, orgName);\t\r\n\t}else if(el.closest('.nice-select-dropdown') != null && el.dataset.value != undefined){\r\n\t\t//nice select\r\n\t\tvalue = el.dataset.value\r\n\t}else if(el.list != null && el.value != '' && checkDatalist){\r\n\t\tvalue =  getDataListValue(el);\r\n\t}else if(el.name != undefined && el.name.endsWith('[]')){\r\n\t\tvalue =  getMultiValue(form, el);\r\n\t}else if(el.value != null && el.value != 'undefined'){\r\n\t\tvalue = el.value;\r\n\t}\r\n\t\r\n\tif(lowercase){\r\n\t\treturn value.toLowerCase();\r\n\t}\r\n\treturn value;\r\n}","import {copyFormInput, fixNumbering, removeNode} from '../../forms/js/forms.js';\r\n\r\ndocument.addEventListener('click', function(event) {\r\n\tlet target = event.target;\r\n\t\r\n\t//add element\r\n\tif(target.matches('.add')){\r\n\t\tcopyFormInput(target.closest(\".clone_div\"));\r\n\r\n\t\tfixNumbering(target.closest('.clone_divs_wrapper'));\r\n\r\n\t\ttarget.remove();\r\n\t}\r\n\t\r\n\t//remove element\r\n\tif(target.matches('.remove')){\r\n        console.log(target);\r\n\t\t//Remove node clicked\r\n\t\tremoveNode(target);\r\n\t}\r\n});"],"names":["scripts","afterScriptsLoaded","attachTo","tinymce","remove","document","querySelectorAll","forEach","el","window","tinyMCE","execCommand","id","dispatchEvent","Event","bubbles","cancelable","addEventListener","ev","area","closest","querySelector","panel","style","visibility","target","matches","display","select","undefined","_niceselect","NiceSelect","bind","searchable","addScripts","length","shift","tagName","getElementById","s","createElement","type","src","innerHTML","head","appendChild","removeDefaultSelect","Array","from","options","option","defaultSelected","console","log","tinymceSettings","copyFormInput","originalNode","newNode","clear","selectedIndex","selectedOptions","destroy","tn","get","settings","save","prepareForCloning","cloneNode","value","init","input","checked","uploadButton","dataset","index","nodeNr","previewDiv","i","previousVal","getElementsByTagName","error","update","nextSibling","textContent","html","insertAdjacentHTML","parentNode","insertBefore","fixNumbering","cloneDivsWrapper","clone","replace","divid","classList","contains","name","removeNode","node","allCloneDivs","addElement","prev","previousElementSibling","changeFieldValue","selector","functionRef","form","addition","forceValue","Element","oldValue","orgName","checkDatalist","compareValue","lowercase","match","trace","getRadioValue","elements","push","getCheckboxValue","list","origInput","getDataListValue","endsWith","elem","getMultiValue","toLowerCase","getFieldValue","targets","test","date","Date","setDate","getDate","parseInt","toISOString","split","element","splitted","year","month","day","nr","dataListOption","add","val","evt","async","requestNewFormResults","wrapper","button","outerHTML","formData","FormData","formId","formid","shortcodeId","shortcodeid","append","url","URL","location","searchParams","loader","Main","showLoader","response","FormSubmit","fetchRestApi","btn","disabled","event","stopPropagation","required","submitForm","displayMessage","reset","formReset","saveFormInput","set","delete","history","pushState","temp","js","children","css","addStyles","formbuilderSwitch","archivedEntriesSwitch","onlyOwnSwitch","includes"],"sourceRoot":""}